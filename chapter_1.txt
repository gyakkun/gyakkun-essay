第一章 概述


1.1 背景及动机

随着新校长的上任, 新校区、新院系的建设如火如荼地进行着, 然而随之而来的是过渡时期旧校区不得不接纳更多待迁移至新校区的新生, 以及宿舍的四人间改六人间、食堂容量的扩增、深圳校区临时教学办公场所建设等的问题。其中很少被人提及, 但却又实实在在地影响着每位学生每天学习、生活体验的就是校园网的网速问题。显然, 在人数增加的情况下, 校园网, 尤其是人数急剧增加的东校区的出口带宽并没有随着之增加, 在网络中心的限速策略下, 校区内人均带宽发生了一定的下降, 在晚上(18:00~24:00)这段网络高峰时间的网络拥堵情况尤为显著, 表现为看网课、游戏主播等直播类应用的卡顿、在线视频应用无法调整为高清分辨率, 自动回落到低分辨率, 游戏因为网络拥塞导致的高延迟等, 都极为影响使用体验[注]。

此外, 笔者还向学校网络中心确认了因为出口带宽吃紧导致的校园网IPv6开始正式实施限速措施, 即限速至人均10Mbps[注], 和之前不限速比起来, 使用体验有着天壤之别。

在此之前, 校内, 尤其是以数据科学与计算机学院院内的一群学生为首的IPv6协议爱好者, 一直致力于在校园内推广IPv6协议应用的使用, 包括但不限于视频直播、文件资源分享、开发镜像CDN等应用类型, 涵盖面广泛, 覆盖了院内学生的诸多需求与现实关切。笔者作为爱好者之一, 深感在学生群体中推广基于IPv6协议应用的必要性, 在养成良好的校内乃至对公网的IPv6协议应用的使用习惯后, 能够使得本来蜂拥至校园网出口的流量变成校园内局域网的流量, 继而大大减轻校园网公网出口的负担, 从而能提供良好的校园网使用体验。

基于上述现实, 笔者及同好们提出了建设一个基于IPv6的资源分享平台的构想, 初步规划使用成熟的Bittorrent协议及相应的客户端软件, 开发一个服务器端的资源分享发布平台, 相比传统的FTP/HTTP等单点C/S、B/S的文件发布分享方式, 具有极好的容错性, 同时Bittorrent协议的分布式特点也能较好地分担各个客户端节点的负担, 使得每位用户都能在较小的性能损耗下收获较好的使用体验。

下面将简要描述国内以IPv6协议推广为目的的大学校内Bittorrent协议资源分享平台现状。

Bittorrent(下记BT)作为一种曾经极为流行的文件传输协议, 即使在现在依然有着广泛的用户基础。虽然如今文件分享的主流方式是以百度网盘为首的在线文件存储应用及相关云服务, 但笔者一直相信, 不依赖单一节点的分布式的文件分享才是文件分享的终极方式。国内不少大学的有识之士也认识到这一点, 为此开发、部署、运营着大量的BT资源分享平台。

由于互联网的开放性, 一国国内合法获取的资源在另一国未必具有相应的国内版权, 因此不少BT网站为了规避风险, 将BT分享平台唯一需要中心化部署的追踪器服务器(Tracker)采取账号化管理, 需要注册登录取得相应的鉴权(authentication)方能正常使用 (详细的描述见第二章)。国内大学的BT平台为了规避版权等风险, 不约而同地采取了这样的管理方式。这种管理方式被称作私有追踪器(Private Tracker, 简称PT, 下记PT)。PT网站因为需要用户注册登录系统, 以及Torrent文件(种子文件, 下记种子)的发布、管理平台, 是需要进行一定的系统分析、调研后去建构及耗时开发的。国内大学的一些团队做了相应的工作, 并将其开源, 运用在了不少其他大学的PT网站上。

提到国内大学PT网站所用到的系统, 永远无法绕过的是浙江大学NexusPHP团队开发的NexusPHP系统[注]。以它为基础, 部署、运营、二次开发的代表性PT网站有北京邮电大学的北邮人BYRBT[注], 天津大学的北洋园TJUPT[注]等。除了NexusPHP外,  还有以国内最早的教育网PT, 东北大学六维空间为代表的使用开源论坛系统Discuz!为基础二次开发的PT系统。

目前, 北京邮电大学的北邮人BYRPT和东北大学的六维空间是国内目前最大的教育网内的PT网站。


1.2 PT网站架设的问题描述

为了能够尽快、可靠地实现前述构想, 笔者及同好必须要在既有的系统中进行选型, 进而二次开发, 尽快上线部署, 赶在新生入学等关键的时间节点进行推广, 进而达到校园网资源最大化的目标。

1.2中提到的NexusPHP和Discuz!是目前比较成熟的PT网站使用的系统, 两者都用PHP语言写就。其中NexusPHP基于TBSource开发, 在后者的基础上添加或完善了大量功能，同时极大地提高了代码效率(除TBSource外，还吸取了一些其它private tracker的想法或代码，如Bit-HDTV，What.cd和SceneTorrents)[注, 直接抄自NeuxsPHP简介]。NexusPHP最后一个公开版本发布于2012年7月7日, 版本号为Standard v1.5 Beta 5, 包括北邮人BYRBT在内的国内不少NexusPHP PT网站都是基于这个版本二次开发的。





















